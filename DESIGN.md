# DESIGN.md

## 基本構造

- GitHub Pages を利用した静的なサイトを docs に作るものです。
- Vite を使って静的なサイトを構築します。
  - MapLibre GL JS を使って地図を表示するサイトです。
  - PMTiles に対応しています。
  - MapLibre GL JS の globe モードが最初から有効になっています。
- サイトは `https://hfu.github.io/hakuchizu/#style=XXXX` というURLで動くようにします。
  - style が query パラメータではなくてハッシュパラメータであることに注意してください。スタイルをサーバーに送ることを回避する設計です。
  - 地図の位置情報（ズーム/緯度/経度）もハッシュパラメータとして保存され、`#style=XXXX&zoom/lat/lng`の形式で共有できます。
- XXXX には、LZ-string + URL-safe Base64 エンコードされた MapLibre GL JS のスタイル定義が入ります。
  - style が与えられない時は、docs/style.json を自動的に LZ-string でエンコードした style.lz.txt の内容を使用します。
  - adm1 データの name_ja 属性に入っている日本語の地名を表示したいです。地図上の地域をクリックすると、name_ja が表示されるようになっています。
  - 地図の初期中心座標はビシュケク（74.5698, 42.8746）です。

## デフォルト style.json の仕様

- `https://optgeo.github.io/ky1/ky1.pmtiles` を source にします。
- source-layer = `adm1` を fill レイヤにします。
- 地図の初期中心座標はビシュケク（74.5698, 42.8746）です。
- sprite や font は設定しません。不要だからです。

## インタラクション設計

- 地図上の adm1 レイヤーの地域をクリックすると、情報ウィンドウが表示されます。
- 情報ウィンドウには地域の名前（name_ja または name）とその他の属性が表示されます。
- 地図の別の場所をクリックするか、地図を移動させると情報ウィンドウは閉じます。
- Globe モードを使用しているため、地球儀のように地図を回転させることができます。
  
## プロジェクトタイトルについて

- 日本語では「はいから白地図」、英語では「Beautiful Maps」とします。
- 最後に日本語プロジェクト名の経緯について書きましょう。「はいからはくち」という曲名から取ったこと、そして歌詞の中で「haikara is beautiful」と歌われていることにちなんで英語名を "Beautiful Maps" としています。

## ドキュメントについて

- .md ファイルでドキュメントします。
- 英語・日本語の順番の併記にします。
- README.md の他、技術的なノートとして NOTES.md を作ります。